# 피드백 루프 메커니즘

> **적용 대상**: 전체 8단계 파이프라인
> **목적**: 캠페인 성과 데이터를 다음 이터레이션에 체계적으로 반영
> **핵심**: Phase 7 (Analysis) → Phase 0/2 자동 피드백

---

## 피드백 루프 유형

### Type 1: QA 리턴 루프 (파이프라인 내부)

```
Phase 5 (QA Scoring)
  ├─ PASS (>= 35점, 개별 >= 5) → Phase 6 진행
  ├─ REVISE (>= 30점 OR 개별 < 5) → Phase 3 리턴 (Production)
  └─ REJECT (< 30점 OR 개별 < 3) → Phase 2 리턴 (Concept)
```

**리턴 데이터**:
- QA 스코어카드 (전체 점수 + 지표별 상세)
- 수정 필요 항목 구체적 지시
- 원본 전략/리서치 데이터 참조
- 이전 리턴 이력 (반복 방지)

**제한**:
- 최대 3회 리턴 (4회 차 → TEAM_LEAD 에스컬레이션)
- 동일 지적 2회 반복 → TEAM_LEAD 개입

---

### Type 2: 성과 피드백 루프 (캠페인 간)

```
Phase 7 (Analysis + Feedback)
  │
  ├─ 전략 수정 필요 → Phase 0 (Deep Research) 재진입
  │   handoff: analysis_to_planning.md
  │   조건: KPI 달성률 < 50% OR 시장 변화 감지
  │
  ├─ 크리에이티브 개선 필요 → Phase 2 (Concept) 재진입
  │   조건: CTR/CVR 벤치마크 하회 AND 전략은 유효
  │
  └─ 최적화만 필요 → Phase 3 (Production) 미세 조정
      조건: 성과 양호하나 A/B 테스트 기반 개선 가능
```

**전달 데이터** (`analysis_to_planning.md`):

```markdown
## 성과 피드백 요약
- 캠페인 기간: {start} ~ {end}
- 총 광고비: {spend}원
- 핵심 KPI 달성률: {achievement}%

## 채널별 성과
| 채널 | 예산 | 소진 | CTR | CVR | CPA | ROAS |
|------|------|------|-----|-----|-----|------|

## 인사이트
### 성공 요인 (유지)
{잘 된 것}
### 개선 필요 (변경)
{안 된 것}
### 신규 발견 (추가)
{새로운 기회}

## 다음 이터레이션 권고
- 재진입 지점: Phase {0/2/3}
- 핵심 변경 사항: {구체적 변경}
- 유지 사항: {변경하지 말아야 할 것}
```

---

### Type 3: 학습 피드백 (누적 학습)

**저장 위치**: `archive/completed_campaigns.md`

```markdown
## 캠페인 학습 카드
- 캠페인명: {name}
- 업종: {industry}
- 기간: {period}
- 총 예산: {budget}

### 전략 학습
- 효과적이었던 전략: {strategy}
- 비효과적이었던 전략: {strategy}

### 채널 학습
| 채널 | 실제 성과 | 벤치마크 대비 | 학습 포인트 |
|------|----------|-------------|------------|

### 크리에이티브 학습
- 최고 성과 카피: {copy} (CTR: {n}%)
- 최저 성과 카피: {copy} (CTR: {n}%)
- 학습: {insight}

### 키워드 학습
- 골든 키워드: {keywords}
- 네거티브 추가: {keywords}
- 학습: {insight}
```

**활용**: DEEP_RESEARCHER가 동일/유사 업종 캠페인 시작 시 참조 (Gate 3: Existing Data Check)

---

## 피드백 트리거 조건

### 자동 트리거 (ANALYTICS_TEAM → TEAM_LEAD)

| 조건 | 트리거 | 재진입 지점 |
|------|--------|------------|
| KPI 달성률 < 50% (7일 이상) | **전략 재검토** | Phase 0 |
| CTR이 벤치마크 50% 미만 | **크리에이티브 개선** | Phase 2 |
| CVR 급락 (전주 대비 -30%) | **랜딩/크리에이티브 점검** | Phase 3 |
| CPA가 목표의 200% 초과 | **긴급 최적화** | Phase 1 (전략 수정) |
| 특정 채널 ROAS < 100% (14일) | **채널 재배분** | Phase 1 |
| 새 경쟁사 진입 감지 | **경쟁 리서치 업데이트** | Phase 0 |
| 시즌/트렌드 변화 | **크리에이티브 리프레시** | Phase 2 |

### 수동 트리거 (오너 요청)

- "광고 성과 분석해줘" → Phase 7 실행 → 자동 피드백 생성
- "캠페인 개선해줘" → Phase 7 + 재진입 지점 자동 판단
- "크리에이티브 바꿔줘" → Phase 2/3 직접 재진입

---

## 이터레이션 관리

### 이터레이션 넘버링

```
Campaign: LinkNote_2026Q1
├── v1.0 (초기 파이프라인)
│   ├── Phase 0-6 완료
│   └── Phase 7 분석 → 피드백 생성
├── v1.1 (QA 리턴 → Production 수정)
│   ├── Phase 3-5 재실행
│   └── PASS → Phase 6 진행
├── v2.0 (성과 피드백 → 전략 수정)
│   ├── Phase 0-6 재실행
│   └── Phase 7 분석 → 피드백 생성
└── v2.1 (크리에이티브 리프레시)
    ├── Phase 2-5 재실행
    └── PASS → Phase 6 진행
```

### 이터레이션별 비교

```markdown
## 이터레이션 성과 비교

| 버전 | 기간 | CTR | CVR | CPA | ROAS | 변경 사항 |
|------|------|-----|-----|-----|------|----------|
| v1.0 | W1-W2 | 2.1% | 1.8% | 15K | 280% | 초기 런칭 |
| v2.0 | W3-W4 | 3.4% | 2.5% | 11K | 420% | 전략 수정 + 크리에이티브 교체 |
| v2.1 | W5-W6 | 3.8% | 2.7% | 9.5K | 480% | A/B 테스트 기반 카피 최적화 |
```

---

## 피드백 품질 보장

### DEEP_RESEARCHER의 피드백 활용 의무

1. **과거 캠페인 참조**: 동일/유사 업종 학습 카드 필수 확인
2. **이전 이터레이션 참조**: 재진입 시 이전 분석 결과 반드시 반영
3. **개선/유지 구분**: "유지 사항"은 변경하지 않음 (과최적화 방지)

### CONCEPT_PLANNER의 피드백 반영 의무

1. **스코어카드 참조**: QA 리턴 시 스코어카드 점수 개선에 집중
2. **동일 실수 금지**: 이전 리턴 사유와 동일한 문제 반복 시 에스컬레이션
3. **피드백 트래킹**: 어떤 피드백을 어떻게 반영했는지 명시

### TEAM_LEAD의 루프 관리 의무

1. **루프 횟수 모니터링**: 3회 초과 리턴 방지
2. **품질 추세 확인**: 이터레이션마다 점수 향상 여부 확인
3. **중단 판단**: 개선 정체 시 근본 원인 분석 후 전략 변경 결정
